# Story E4.2 — Romaneio Diário
**Epic:** E4 — Logística
**Status:** Ready for Review
**Criado por:** @sm (River) | 2026-02-19
**Complexidade:** M (5 pontos)

---

## Descrição
Como **Gerente de Unidade**, preciso visualizar o romaneio diário gerado automaticamente a partir das rotas fixas, para que os motoristas saibam quais clientes visitar no dia de acordo com o turno e dia da semana.

---

## Critérios de Aceite

- [x] **AC1:** Página `/unit/[unitId]/manifests` lista os romaneios do dia atual agrupados por rota
- [x] **AC2:** Cada romaneio mostra: nome da rota, turno, motorista (se houver), lista de paradas em sequência com endereço do cliente
- [x] **AC3:** Filtro por turno (morning/afternoon/evening/todos)
- [x] **AC4:** Botão "Gerar Romaneio" cria registro em `daily_manifests` para o dia e rota selecionados
- [x] **AC5:** Status do romaneio: `pending` → `in_progress` → `completed`
- [x] **AC6:** Exportação do romaneio como texto simples (print-friendly via `window.print()`)

---

## Escopo
**IN:** Geração manual de romaneio, visualização, status básico
**OUT:** Geração automática agendada (Wave 3), assinatura digital do cliente (Wave 3)

---

## Contexto Técnico

```sql
-- 011_manifests.sql
-- Tabela: daily_manifests (rota, data, status, motorista)
-- Tabela: manifest_stops (parada, ordem, status de visita)
```

## File List (preenchido por @dev)
- [x] `supabase/migrations/011_manifests.sql`
- [x] `types/manifest.ts`
- [x] `actions/manifests/crud.ts`
- [x] `components/domain/logistics/manifest-card.tsx`
- [x] `components/domain/logistics/manifest-list.tsx`
- [x] `app/(unit)/[unitId]/manifests/page.tsx`
- [x] `components/layout/unit-sidebar.tsx` (link Romaneios adicionado)

## Dev Agent Record
### Agent Model Used
claude-sonnet-4-6

## Change Log
| Data | Agente | Ação |
|------|--------|------|
| 2026-02-19 | @sm River | Story criada (Status: Ready) |
| 2026-02-19 | @dev Dex | Implementação completa. Status → Ready for Review |
