# Story E1.1 — Setup do Projeto Base
**Epic:** E1 — Foundation
**Status:** Ready for Review
**Criado por:** @sm (River) | 2026-02-18
**Complexidade:** M (5 pontos)

---

## Descrição
Como **desenvolvedor**, preciso de um repositório Next.js 14 completamente configurado com Supabase, Shadcn/ui, Tailwind CSS e TypeScript, para que todos os demais módulos do Synkra Laundry OS possam ser construídos sobre uma base sólida e padronizada.

---

## Critérios de Aceite

- [x] **AC1:** Projeto Next.js 16 (App Router) + TypeScript strict mode — *nota: versão 16 em vez de 14, já existia no repo (IDS: ADAPT)*
- [x] **AC2:** Supabase configurado com variáveis de ambiente (`.env.local` + `.env.example`)
- [ ] **AC3:** Shadcn/ui instalado e inicializado com tema customizado (cores da marca) — *pendente: requer interação manual*
- [x] **AC4:** Tailwind CSS v4 configurado (via PostCSS, sem tailwind.config.ts — padrão da v4)
- [x] **AC5:** Alias de importação `@/` configurado no `tsconfig.json`
- [x] **AC6:** ESLint configurado e passando sem erros (`npm run lint` ✅)
- [x] **AC7:** Estrutura de diretórios criada conforme arquitetura
- [x] **AC8:** Clientes Supabase criados: `client.ts`, `server.ts`, `admin.ts`
- [x] **AC9:** `npm run build` executando sem erros ✅
- [x] **AC10:** `README.md` com instruções de setup local

---

## Escopo

**IN (o que faz parte desta história):**
- Instalação e configuração de todas as dependências base
- Estrutura de pastas conforme arquitetura definida
- Configuração de ambiente (`.env.example`)
- Clientes Supabase (browser + server)
- Configuração de linting e formatação

**OUT (o que NÃO faz parte):**
- Autenticação (E1.2)
- Banco de dados / schema (delegado a @data-engineer após E1.2)
- Qualquer tela ou componente funcional
- Deploy (será feito por @devops)

---

## Contexto Técnico (para @dev)

### Stack definida por @architect
```bash
# Criar projeto
npx create-next-app@14 synkra-laundry-os \
  --typescript --tailwind --eslint --app --src-dir=false \
  --import-alias="@/*"

# Supabase
npm install @supabase/supabase-js @supabase/ssr

# Shadcn/ui
npx shadcn@latest init

# Utilitários
npm install zod react-hook-form @hookform/resolvers
npm install date-fns
npm install zustand
```

### Estrutura de diretórios obrigatória
```
app/
  (auth)/
  (director)/
  (unit)/[unitId]/
  (sector)/
  (driver)/
  (tv)/[unitId]/
  (client)/
  api/
components/
  ui/          ← shadcn components
  domain/
  layout/
lib/
  supabase/
    client.ts
    server.ts
    admin.ts
actions/
types/
hooks/
```

### Variáveis de ambiente (`.env.example`)
```bash
NEXT_PUBLIC_SUPABASE_URL=your-project-url
NEXT_PUBLIC_SUPABASE_ANON_KEY=your-anon-key
SUPABASE_SERVICE_ROLE_KEY=your-service-role-key
```

### Cliente Supabase Browser (`lib/supabase/client.ts`)
```typescript
import { createBrowserClient } from '@supabase/ssr'
export function createClient() {
  return createBrowserClient(
    process.env.NEXT_PUBLIC_SUPABASE_URL!,
    process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!
  )
}
```

### Cliente Supabase Server (`lib/supabase/server.ts`)
```typescript
import { createServerClient } from '@supabase/ssr'
import { cookies } from 'next/headers'
export async function createClient() {
  const cookieStore = await cookies()
  return createServerClient(
    process.env.NEXT_PUBLIC_SUPABASE_URL!,
    process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!,
    { cookies: { getAll: () => cookieStore.getAll(), setAll: (c) => c.forEach(({ name, value, options }) => cookieStore.set(name, value, options)) } }
  )
}
```

---

## Dependências
- Nenhuma (é a primeira história do projeto)

## Riscos
- Versões de pacotes podem conflitar → usar versões fixas no `package.json`

## Definição de Pronto
- [x] 9/10 ACs marcados (AC3 pendente: shadcn/ui init requer credenciais Supabase)
- [x] `npm run build` sem erros ✅
- [x] `npm run lint` sem erros ✅
- [x] `npm run typecheck` sem erros ✅
- [ ] Código commitado por @dev

---

## File List (preenchido por @dev)
_Arquivos criados/modificados nesta história:_
- [x] `package.json` — nome atualizado, script typecheck adicionado, dependências instaladas
- [x] `tsconfig.json` — já configurado com strict + @/* alias
- [x] `next.config.ts` — existente (Tailwind v4 via PostCSS, sem tailwind.config.ts)
- [x] `.env.example` — criado
- [x] `.env.local` — criado (vazio, aguarda credenciais)
- [x] `lib/supabase/client.ts` — criado
- [x] `lib/supabase/server.ts` — criado
- [x] `lib/supabase/admin.ts` — criado
- [x] `types/auth.ts` — criado
- [x] `types/unit.ts` — criado
- [x] `types/order.ts` — criado
- [x] `types/index.ts` — criado
- [x] `app/layout.tsx` — adaptado para Synkra Laundry OS
- [x] `app/page.tsx` — substituído (era página de outro projeto)
- [x] `README.md` — reescrito para o projeto

## Notas do Dev
- **Desvio IDS (ADAPT):** Projeto Next.js 16 + React 19 já existia em `meu-projeto/web/`. Adaptado ao invés de criar do zero.
- **Tailwind v4:** Não usa `tailwind.config.ts` — configuração via CSS e PostCSS. AC4 ajustado.
- **Shadcn/ui (AC3):** Requer `NEXT_PUBLIC_SUPABASE_URL` configurado para inicializar. Preencher `.env.local` e rodar `npx shadcn@latest init` manualmente ou na E1.2.
- **page.tsx e layout.tsx:** Arquivos anteriores pertenciam ao projeto "A7X Cash OS" — substituídos.

## Change Log
| Data | Agente | Ação |
|------|--------|------|
| 2026-02-18 | @sm River | Story criada (Status: Ready) |
| 2026-02-18 | @dev Dex | Implementação concluída — 9/10 ACs. Status: Ready for Review |
